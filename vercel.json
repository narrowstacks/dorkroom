{
  "buildCommand": "turbo run build --filter=@dorkroom/dorkroom",
  "outputDirectory": "apps/dorkroom/dist",
  "devCommand": "turbo run dev --filter=@dorkroom/dorkroom",
  "installCommand": "bun install",
  "ignoreCommand": "bash scripts/should-deploy.sh",
  "framework": null,
  "functions": {
    "api/**/*.ts": {
      "runtime": "@vercel/node@5.6.3"
    }
  },
  "env": {
    "NODE_OPTIONS": "--experimental-require-module"
  },
  "routes": [
    {
      "src": "/",
      "has": [{ "type": "host", "value": "api.dorkroom.art" }],
      "dest": "/api/docs"
    },
    {
      "src": "/(films|developers|combinations|filmdev)/?",
      "has": [{ "type": "host", "value": "api.dorkroom.art" }],
      "dest": "/api/$1"
    },
    { "src": "/api/(.*)", "dest": "/api/$1" },
    { "handle": "filesystem" },
    {
      "src": "/((?!api/).*)",
      "has": [
        {
          "type": "header",
          "key": "user-agent",
          "value": "(?i).*(Twitterbot|facebookexternalhit|Facebot|Slackbot|Applebot|Discordbot|WhatsApp|Googlebot|LinkedInBot|Pinterestbot|TelegramBot|Baiduspider|bingbot|yandex|Embedly|Quora Link Preview|Showyoubot|outbrain|rogerbot|vkShare).*"
        }
      ],
      "dest": "/api/meta?path=/$1"
    },
    { "src": "/(.*)", "dest": "/" }
  ]
}
